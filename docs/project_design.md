# 宿舍管理系统设计文档

## 一、用户角色体系

### 1. 学校用户
- **分为两类**
  - 教师用户：只能管理所负责的班级
  - 管理层用户：拥有全部权限
- **对应表**：`school_user`、`teacher_info`

### 2. 学生用户
- **组织方式**：按学院和班级组织管理
- **对应表**：`student_user`、`student_info`

### 3. 宿管用户
- **ID规则**：999 + 楼号 + 类型(0) + 编号
- **管理范围**：一对一负责某个宿舍楼
- **对应表**：`house_master`

### 4. 维修人员
- **ID规则**：999 + 校区号 + 类型(1) + 编号
- **管理范围**：按校区划分
- **对应表**：`repair_people`

## 二、组织架构

### 1. 校区设置
- 梁园校区（代号：1）
- 睢阳校区（代号：2）

### 2. 学院体系
- 共19个学院
- **对应表**：`college_info`

### 3. 宿舍楼管理
- **主表**：`room_build`
  - 基本信息：楼号、名称、层数、房间数等
  - 类型区分：男寝(1)、女寝(2)、混合(3)
- **详情表**：`room_build_details`
  - 具体房间信息
  - 混寝管理支持
  - 管理教师关联

## 三、业务关系

### 1. 宿舍楼与人员关系
```
宿舍楼(1) ←→ 宿管(1)  [一对一]
宿舍楼(n) ←→ 维修人员(m)  [多对多，按校区]
宿舍楼(1) ←→ 学生(n)  [一对多]
```

### 2. 教师与学生关系
```
教师(1) ←→ 班级(n)  [一对多]
班级(1) ←→ 学生(n)  [一对多]
```

### 3. 宿舍分配关系
- 可以按学院统一分配
- 支持混寝设置
- 可以设置房间类型（几人寝）

## 四、系统特点

### 1. 多校区管理
- 分校区管理维修人员
- 统一管理宿舍资源

### 2. 灵活的宿舍分配
- 支持混寝管理
- 可以按学院划分
- 可以设置男女寝分区

### 3. 分级权限管理
| 角色 | 权限范围 |
|------|----------|
| 学校管理层 | 全部权限 |
| 教师 | 所管班级权限 |
| 宿管 | 所管宿舍楼权限 |
| 维修人员 | 所在校区维修权限 |
| 学生 | 个人相关权限 |

### 4. 完整的宿舍信息管理
- 详细的楼栋信息
- 房间使用状态跟踪
- 维修记录管理

## 五、技术架构
- 基于 Spring Boot 2.7.6
- MyBatis-Plus 作为 ORM 框架
- MySQL 数据库
- 模块化的控制器设计
  - `housemaster/`：宿管相关功能
  - `repairpeople/`：维修人员相关功能
  - `school/`：学校管理功能
  - `student/`：学生相关功能

## 六、数据库设计说明

### 1. 用户相关表
- `school_user`：学校用户基础表
- `student_user`：学生用户表
- `student_info`：学生详细信息表
- `teacher_info`：教师信息表

### 2. 宿舍管理表
- `room_build`：宿舍楼基本信息表
  - 包含楼栋基本信息
  - 使用状态管理
  - 房间统计信息
- `room_build_details`：宿舍楼详细信息表
  - 具体房间配置
  - 学院分配情况
  - 混寝设置

### 3. 人员管理表
- `house_master`：宿管信息表
  - ID规则说明
  - 基本信息管理
  - 负责楼栋关联
- `repair_people`：维修人员信息表
  - ID规则说明
  - 校区划分
  - 联系方式

### 4. 组织架构表
- `college_info`：学院信息表
  - 学院基本信息
  - 预置19个学院数据 